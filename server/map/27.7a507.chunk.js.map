{"version":3,"sources":["webpack:///./src/test-cases/Tooltip/Test.js","webpack:///./src/test-cases/Tooltip/Tooltip.scss","webpack:///./src/test-cases/Tooltip/Tooltip.js","webpack:///./src/test-cases/Tooltip/utils.js","webpack:///./src/test-cases/Tooltip/Tooltip.scss?0668"],"names":["Test","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","_Tooltip__WEBPACK_IMPORTED_MODULE_1__","title","style","display","padding","border","width","marginTop","Component","propTypes","__webpack_exports__","module","exports","__webpack_require__","push","i","placements","top","bottom","Tooltip","state","visible","getVisibleClassName","_this","getPopupClassNameFromAlign","placement","classNames","join","saveRef","name","ref","handleMouseEnter","e","setState","handleMouseLeave","renderChildren","children","props","child","React","Children","only","cloneElement","onMouseEnter","onMouseLeave","renderTip","createPortal","className","concat","document","body","prevProps","prevState","align","findDOMNode","this","tip","target","alignClassName","visibleClassName","react__WEBPACK_IMPORTED_MODULE_0__","PropTypes","oneOfType","string","element","source","_target$getBoundingCl","getBoundingClientRect","left","height","Top","offsetHeight","Left","offsetWidth","alignTop","alignBottom","content","options","hmr","transform","insertInto","undefined","update","locals","hot","accept","newContent","b","key","idx","Error","dispose"],"mappings":"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","file":"app/chunks/27.7a507.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport Tooltip from './Tooltip';\n\nclass Test extends Component {\n  render() {\n    return (\n      <div>\n        <Tooltip title=\"这里是提示\">\n          <div style={{\n            display: 'inline-block',\n            padding: '10px',\n            border: '1px dashed pink',\n          }}\n          >\n            Tooltip\n          </div>\n        </Tooltip>\n        <Tooltip title=\"这里是一个很长的提示\">\n          <div style={{\n            width: 70,\n            padding: '10px',\n            border: '1px dashed pink',\n            marginTop: 200,\n          }}\n          >\n            Tooltip\n          </div>\n        </Tooltip>\n      </div>\n    );\n  }\n}\n\nTest.propTypes = {\n\n};\n\nexport default Test;\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".tooltip{position:fixed;top:0;left:0}.tooltip-hidden{display:none}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.tooltip-inner{background-color:rgba(0,0,0,0.75);border-radius:2px;color:white;padding:6px 8px}.tooltip-placement-top{padding-bottom:8px}.tooltip-placement-top .tooltip-arrow{bottom:3px;border-width:5px 5px 0;border-top-color:rgba(0,0,0,0.75)}.tooltip-placement-bottom{padding-top:8px}.tooltip-placement-bottom .tooltip-arrow{top:3px;border-width:0 5px 5px;border-bottom-color:rgba(0,0,0,0.75)}\\n\", \"\"]);\n\n// exports\n","import React, { Component, Fragment } from 'react';\nimport { createPortal, findDOMNode } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport align from './utils';\nimport './Tooltip.scss';\n\nconst placements = {\n  top: 'tooltip-placement-top',\n  bottom: 'tooltip-placement-bottom',\n};\nclass Tooltip extends Component {\n  state = {\n    visible: false,\n  }\n\n\n  componentDidUpdate(prevProps, prevState) {\n    const placement = align(findDOMNode(this.tip), findDOMNode(this.target));\n    const alignClassName = this.getPopupClassNameFromAlign(placement);\n    const visibleClassName = this.getVisibleClassName();\n    findDOMNode(this.tip).className = `${visibleClassName}  ${alignClassName}`;\n  }\n\n  getVisibleClassName=() => (this.state.visible ? 'tooltip' : 'tooltip tooltip-hidden')\n\n  getPopupClassNameFromAlign = (placement) => {  \n    const classNames = [];\n    classNames.push(placements[placement]);\n    return classNames.join(' ');\n  }\n\n  saveRef = name => (ref) => {\n    this[name] = ref;\n  }\n\n  handleMouseEnter = (e) => {\n    this.setState({\n      visible: true,\n    });\n  }\n\n  handleMouseLeave = (e) => {\n    this.setState({\n      visible: false,\n    });\n  }\n\n  renderChildren = () => {\n    const { children } = this.props;\n    const child = React.Children.only(children);\n    return React.cloneElement(child,\n      {\n        ref: this.saveRef('target'),\n        onMouseEnter: this.handleMouseEnter,\n        onMouseLeave: this.handleMouseLeave,\n      });\n  }\n\n  renderTip = () => {\n    const { title } = this.props;\n    const { visible } = this.state;\n    return createPortal(\n      <div ref={this.saveRef('tip')} className={`tooltip ${visible ? '' : 'tooltip-hidden'}`}>\n        <div className=\"tooltip-content\">\n          <div className=\"tooltip-arrow\" />\n          <div className=\"tooltip-inner\">{title}</div>\n        </div>\n      </div>,\n      document.body,\n    );\n  }\n\n\n  render() {\n    return (\n      <Fragment>\n        {this.renderChildren()}\n        {this.renderTip()}\n      </Fragment>\n    );\n  }\n}\n\nTooltip.propTypes = {\n  title: PropTypes.oneOfType([\n    PropTypes.string, \n    PropTypes.element,\n  ]),\n};\n\nexport default Tooltip;\n","function align(source, target) {\n  let placement = 'top';\n  const {\n    left, top, height, width,\n  } = target.getBoundingClientRect();\n  const targetHeight = source.offsetHeight;\n  const targetWidth = source.offsetWidth;\n  let Top = top - targetHeight;\n  const Left = left + (width - targetWidth) / 2;\n  // 上边放不下，就放下边\n  if (Top < 0) {\n    Top = top + height;\n    placement = 'bottom';\n  }\n  // console.log(Left, Top);\n  source.style.top = `${Top}px`;\n  source.style.left = `${Left}px`;\n  return placement;\n}\nfunction alignTop() {\n\n}\nfunction alignBottom() {\n\n}\nexport default align;\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./Tooltip.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./Tooltip.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./Tooltip.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}"],"sourceRoot":""}