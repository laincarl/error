{"version":3,"sources":["webpack:///./src/test-cases/ResizeAble/Test.js","webpack:///./src/test-cases/ResizeAble/ResizeAble.js"],"names":["Test","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","_ResizeAble__WEBPACK_IMPORTED_MODULE_1__","modes","size","maxHeight","maxWidth","defaultSize","width","height","style","textAlign","Component","__webpack_exports__","MODES","top","cursor","right","bottom","left","topRight","bottomRight","bottomLeft","topLeft","propTypes","PropTypes","shape","oneOfType","number","string","minHeight","minWidth","ResizeAble","props","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","saveRef","name","ref","handleMouseDown","mode","e","stopPropagation","preventDefault","setState","resizing","originSize","resizable","offsetWidth","offsetHeight","x","clientX","y","clientY","document","addEventListener","handleMouseUp","handleMouseMove","removeEventListener","getResizeWidth","vary","state","initWidth","Width","undefined","Math","max","getResizeHeight","initHeight","Height","_this$state","concat","_this2","_this$props","children","_this$state2","className","position","zIndex","map","role","key","_objectSpread","onMouseDown","bind"],"mappings":"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","file":"app/chunks/35.f7fdf.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport ResizeAble from './ResizeAble';\r\n\r\nclass Test extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ResizeAble\r\n          modes={['top', 'right', 'bottom', 'left', 'bottomRight', 'topRight', 'bottomLeft', 'topLeft'] || ['right', 'bottom']}\r\n          size={{\r\n            maxHeight: 500,\r\n            // minWidth: 100,\r\n            maxWidth: 500,\r\n          }}\r\n          defaultSize={{\r\n            width: 200,\r\n            height: 200,\r\n          }}\r\n        >\r\n          <div style={{ textAlign: 'center' }}>可变大小的div</div>\r\n        </ResizeAble>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Test;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nconst MODES = {\r\n  top: {\r\n    cursor: 'row-resize',\r\n    top: -5,\r\n    width: '100%',\r\n    height: 10,\r\n  },\r\n  right: {\r\n    right: -5,\r\n    top: 0,\r\n    width: 10,\r\n    height: '100%',\r\n    cursor: 'col-resize',\r\n  },\r\n  bottom: {\r\n    bottom: -5,\r\n    width: '100%',\r\n    height: 10,\r\n    cursor: 'row-resize',\r\n  },\r\n  left: {\r\n    left: -5,\r\n    top: 0,\r\n    width: 10,\r\n    height: '100%',\r\n    cursor: 'col-resize',\r\n  },\r\n  topRight: {\r\n    height: 20,\r\n    width: 20,\r\n    right: -10,\r\n    top: -10,\r\n    cursor: 'ne-resize',\r\n  },\r\n  bottomRight: {\r\n    height: 20,\r\n    width: 20,\r\n    right: -10,\r\n    bottom: -10,\r\n    cursor: 'se-resize',\r\n  },\r\n  bottomLeft: {\r\n    height: 20,\r\n    width: 20,\r\n    bottom: -10,\r\n    left: -10,\r\n    cursor: 'sw-resize',\r\n  },\r\n  topLeft: {\r\n    height: 20,\r\n    width: 20,\r\n    left: -10,\r\n    top: -10,\r\n    cursor: 'nw-resize',\r\n  },\r\n};\r\nconst propTypes = {\r\n  defaultSize: PropTypes.shape({\r\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n    height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n  }),\r\n  size: PropTypes.shape({\r\n    maxHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n    maxWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n    minHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n    minWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n  }),\r\n};\r\nclass ResizeAble extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resizing: false,\r\n      originSize: {\r\n        width: 0,\r\n        height: 0,\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      mode: null,\r\n    };\r\n    this.mode = null;\r\n    this.size = {\r\n      width: props.defaultSize ? props.defaultSize.width : 'auto',\r\n      height: props.defaultSize ? props.defaultSize.height : 'auto',\r\n    };\r\n  }\r\n\r\n\r\n  saveRef = name => (ref) => {\r\n    this[name] = ref;\r\n  }\r\n\r\n  handleMouseDown = (mode, e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    // 设置默认值\r\n    this.setState({\r\n      mode,\r\n      resizing: true,\r\n      originSize: {\r\n        width: this.resizable.offsetWidth,\r\n        height: this.resizable.offsetHeight,\r\n        x: e.clientX,\r\n        y: e.clientY,\r\n      },\r\n    });\r\n    document.addEventListener('mouseup', this.handleMouseUp);\r\n    document.addEventListener('mousemove', this.handleMouseMove);\r\n  }\r\n\r\n  handleMouseUp = (e) => {\r\n    document.removeEventListener('mousemove', this.handleMouseMove);\r\n    document.removeEventListener('mouseup', this.handleMouseUp);\r\n    this.setState({\r\n      resizing: false,\r\n    });\r\n  }\r\n\r\n  getResizeWidth = (vary) => {\r\n    const { originSize } = this.state;\r\n    const { width: initWidth, height: initHeight } = originSize;\r\n    const { size } = this.props || {};\r\n    const {\r\n      height, width, minHeight, minWidth, maxHeight, maxWidth,\r\n    } = size;\r\n    let Width = 0;\r\n    if (maxWidth !== undefined && initWidth + vary > maxWidth) {\r\n      Width = maxWidth;\r\n    } else if (minWidth !== undefined && initWidth + vary < minWidth) {\r\n      Width = minWidth;\r\n    } else {\r\n      Width = initWidth + vary;\r\n    }\r\n    return Math.max(Width, 0);\r\n    // this.resizable.style.width = `${initWidth + vary}px`;\r\n  }\r\n\r\n  getResizeHeight = (vary) => {\r\n    const { originSize } = this.state;\r\n    const { width: initWidth, height: initHeight } = originSize;\r\n    const { size } = this.props || {};\r\n    const {\r\n      height, width, minHeight, minWidth, maxHeight, maxWidth,\r\n    } = size;\r\n    let Height = 0;\r\n\r\n    if (maxHeight !== undefined && initHeight + vary > maxHeight) {\r\n      Height = maxHeight;\r\n    } else if (minHeight !== undefined && initHeight + vary < minHeight) {\r\n      Height = minHeight;\r\n    } else {\r\n      Height = initHeight + vary;\r\n    }\r\n    return Math.max(Height, 0);\r\n    // this.resizable.style.height = `${initHeight + vary}px`;\r\n  }\r\n\r\n  handleMouseMove = (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    const { mode, originSize } = this.state;\r\n    const { x, y } = originSize;\r\n    let { width, height } = originSize;\r\n\r\n    switch (mode) {\r\n      case 'top': {\r\n        height = this.getResizeHeight(y - e.clientY);\r\n        break;\r\n      }\r\n      case 'topRight': {\r\n        height = this.getResizeHeight(y - e.clientY);\r\n        width = this.getResizeWidth(e.clientX - x);\r\n        break;\r\n      }\r\n      case 'right': {\r\n        width = this.getResizeWidth(e.clientX - x);\r\n        break;\r\n      }\r\n      case 'bottomRight': {\r\n        width = this.getResizeWidth(e.clientX - x);\r\n        height = this.getResizeHeight(e.clientY - y);\r\n        break;\r\n      }\r\n      case 'bottom': {\r\n        height = this.getResizeHeight(e.clientY - y);\r\n        break;\r\n      }\r\n      case 'bottomLeft': {\r\n        height = this.getResizeHeight(e.clientY - y);\r\n        width = this.getResizeWidth(x - e.clientX);\r\n        break;\r\n      }\r\n      case 'left': {\r\n        width = this.getResizeWidth(x - e.clientX);\r\n        break;\r\n      }\r\n      case 'topLeft': {\r\n        height = this.getResizeHeight(y - e.clientY);\r\n        width = this.getResizeWidth(x - e.clientX);\r\n        break;\r\n      }\r\n      default: break;\r\n    }\r\n    this.resizable.style.width = `${width}px`;\r\n    this.resizable.style.height = `${height}px`;\r\n    this.size = {\r\n      width,\r\n      height,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { modes, children, defaultSize } = this.props;\r\n    const { resizing, mode } = this.state;\r\n    return (\r\n      <div\r\n        className=\"resizable\"\r\n        ref={this.saveRef('resizable')}\r\n        style={defaultSize}\r\n      >\r\n        {/* 拖动时，创建一个蒙层来显示拖动效果，防止鼠标指针闪烁 */}\r\n        {resizing && (\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            bottom: 0,\r\n            right: 0,\r\n            zIndex: 9999,\r\n            cursor: MODES[mode].cursor,\r\n          }}\r\n          />\r\n        )}\r\n        {children}\r\n        {\r\n          modes.map(position => <div role=\"none\" key={position} style={{ position: 'absolute', ...MODES[position] }} onMouseDown={this.handleMouseDown.bind(this, position)} />)\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nResizeAble.propTypes = propTypes;\r\n\r\nexport default ResizeAble;\r\n"],"sourceRoot":""}