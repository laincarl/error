{"version":3,"sources":["webpack:///./src/test-cases/TimeLine/TimeLineStore.js","webpack:///./src/test-cases/TimeLine/Line.js","webpack:///./src/test-cases/TimeLine/Point.js","webpack:///./src/test-cases/TimeLine/HoverPoint.js","webpack:///./src/test-cases/TimeLine/AlignBox.js"],"names":["TimeLineStore","toJS","this","HeightLightDuring","StickData","observable","start","end","offsetTop","singleWidth","proId","range","marks","action","_this","_this2","computed","__webpack_exports__","moment","extendMoment","Moment","MOVE_COLOR","Line","props","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","call","saveRef","name","ref","setStick","_this$props","setStickData","setCurrentDate","pos","currentDate","state","_this$props2","diffDay","Math","floor","newCurrentDay","add","isSame","setState","handleMouseEnter","e","activePoint","left","line","getBoundingClientRect","clientX","pointing","document","addEventListener","handleMouseMove","handleMouseLeave","removeEventListener","_this$line$getBoundin2","width","min","calculateLeft","date","_this$props3","diff","renderHeightLightDuring","_this$props4","_ref","_this$props5","startLeft","endLeft","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","_AlignBox__WEBPACK_IMPORTED_MODULE_7__","style","display","marginTop","background","color","border","concat","borderRadius","format","_this$state","className","onMouseEnter","onMouseLeave","_Point__WEBPACK_IMPORTED_MODULE_6__","reverse","size","subtract","_HoverPoint__WEBPACK_IMPORTED_MODULE_5__","length","map","mark","key","title","height","zIndex","Component","propTypes","Point","_extends","_objectSpread","transform","defaultProps","PropTypes","oneOf","HoverPoint","_Point__WEBPACK_IMPORTED_MODULE_2__","AlignBox","setLeft","node","findDOMNode","_assertThisInitialized","contentWidth","offsetWidth","totalWidth","parentNode","finalLeft","max","round","abs","prevProps","prevState","position","children"],"mappings":"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","file":"app/chunks/4.1d5b8.chunk.js","sourcesContent":["import {\r\n  observable, action, computed, toJS,\r\n} from 'mobx';\r\nimport moment from 'moment';\r\n\r\nclass TimeLineStore {\r\n  @observable HeightLightDuring = {\r\n    start: null,\r\n    end: null,\r\n    offsetTop: 0,\r\n  };\r\n\r\n  @observable StickData = {\r\n    singleWidth: 0,\r\n    proId: null,\r\n    range: { start: null, end: null },\r\n    HeightLightDuring: {},  \r\n    marks: [],\r\n  };\r\n\r\n  @action setHeightLightDuring = (HeightLightDuring) => {\r\n    // console.log(HeightLightDuring);\r\n    this.HeightLightDuring = HeightLightDuring;\r\n  }\r\n\r\n  @action setStickData = (StickData) => {\r\n    this.StickData = StickData;\r\n  }\r\n\r\n  @computed get getHeightLightDuring() {\r\n    return toJS(this.HeightLightDuring);\r\n  }\r\n\r\n  @computed get getStickData() {\r\n    return toJS(this.StickData);\r\n  }\r\n}\r\n\r\nexport default new TimeLineStore();\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Moment from 'moment';\r\nimport { findDOMNode } from 'react-dom';\r\nimport { extendMoment } from 'moment-range';\r\nimport HoverPoint from './HoverPoint';\r\nimport Point from './Point';\r\nimport AlignBox from './AlignBox';\r\nimport TimeLineStore from './TimeLineStore';\r\n\r\nconst moment = extendMoment(Moment);\r\nconst MOVE_COLOR = 'rgb(0, 101, 255)';\r\n\r\nclass Line extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      pointing: false,\r\n      left: 0,\r\n      currentDate: props.range.start,\r\n      // singleWidth: 0,      \r\n      activePoint: 'move',\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { singleWidth, range } = props;\r\n    return { currentDate: range.start };\r\n  }\r\n\r\n  saveRef = name => (ref) => {\r\n    this[name] = ref;\r\n  }\r\n\r\n  setStick = () => {\r\n    const {\r\n      singleWidth, proId, range, HeightLightDuring, marks,\r\n    } = this.props;\r\n\r\n    TimeLineStore.setStickData({\r\n      singleWidth, proId, range, HeightLightDuring, marks,\r\n    });\r\n  }\r\n\r\n  setCurrentDate = (pos) => {\r\n    const { currentDate } = this.state;\r\n    const { singleWidth, range } = this.props;\r\n    // 向上舍入，因为时间点应该标记在时间的末尾\r\n    const diffDay = Math.floor(pos / singleWidth);\r\n    // console.log(pos, diffDay, singleWidth);\r\n    const newCurrentDay = moment(range.start).add(diffDay, 'days');\r\n\r\n    if (!moment(currentDate).isSame(newCurrentDay, 'day')) {\r\n      this.setState({\r\n        currentDate: newCurrentDay,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleMouseEnter = (e) => {\r\n    const { activePoint } = this.state;\r\n    const { left } = this.line.getBoundingClientRect();\r\n    const pos = e.clientX - left;\r\n\r\n    this.setCurrentDate(e.clientX - left);\r\n    this.setState({\r\n      pointing: activePoint === 'move',\r\n      left: pos,\r\n    });\r\n    document.addEventListener('mousemove', this.handleMouseMove);\r\n  }\r\n\r\n  handleMouseLeave = (e) => {\r\n    // console.log('leave');\r\n    this.setState({\r\n      pointing: false,\r\n    });\r\n    document.removeEventListener('mousemove', this.handleMouseMove);\r\n  }\r\n\r\n  handleMouseMove = (e) => {\r\n    const { activePoint } = this.state;\r\n    const { left, width } = this.line.getBoundingClientRect();\r\n    const pos = Math.min(e.clientX - left, width - 8); // 保证向右，不会超出\r\n    this.setCurrentDate(e.clientX - left);\r\n    this.setState({\r\n      pointing: activePoint === 'move',\r\n      left: pos,\r\n    });\r\n  }\r\n\r\n  calculateLeft = (date) => {\r\n    const { singleWidth, range } = this.props;\r\n    const tempRange = moment.range(moment(range.start), date);\r\n    return (tempRange.diff('days') + 1) * singleWidth;\r\n  }\r\n\r\n  renderHeightLightDuring = () => {\r\n    const { HeightLightDuring, proId } = this.props;\r\n\r\n    const { start, end, offsetTop } = HeightLightDuring || {};\r\n    if (!start || !end || proId !== HeightLightDuring.proId) {\r\n      return null;\r\n    }\r\n    const { singleWidth, range } = this.props;\r\n    const startLeft = moment(start).diff(moment(range.start), 'days') * singleWidth;\r\n    const width = (moment(end).diff(moment(start), 'days') + 1) * singleWidth;\r\n    const endLeft = startLeft + width;\r\n    return [\r\n      <AlignBox left={startLeft}>\r\n        <span\r\n          style={{\r\n            display: 'inline-block',\r\n            marginTop: 8,\r\n            background: 'white',\r\n            color: MOVE_COLOR,\r\n            border: `1px solid ${MOVE_COLOR}`,\r\n            borderRadius: 5,\r\n          }}\r\n        >\r\n          {moment(start).format('LL')}\r\n        </span>\r\n      </AlignBox>,\r\n      <AlignBox left={endLeft}>\r\n        <span\r\n          style={{\r\n            display: 'inline-block',\r\n            marginTop: 8,\r\n            background: 'white',\r\n            color: MOVE_COLOR,\r\n            border: `1px solid ${MOVE_COLOR}`,\r\n            borderRadius: 5,\r\n          }}\r\n        >\r\n          {moment(end).format('LL')}\r\n        </span>\r\n      </AlignBox>,\r\n    ];\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      pointing, left, currentDate, activePoint,\r\n    } = this.state;\r\n    const { marks } = this.props;\r\n    return (\r\n      <div className=\"TimeLine-line-container\">\r\n        <div className=\"TimeLine-line\" onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave} ref={this.saveRef('line')}>\r\n          {pointing && <Point left={left} reverse color=\"rgb(0, 101, 255)\" date={currentDate} />}\r\n          {/* 当前时间点 */}\r\n          <Point size=\"small\" color=\"orange\" reverse left={this.calculateLeft(moment().subtract(1, 'days'))} />\r\n          {/* 显示开始时间 */}\r\n          <HoverPoint\r\n            color=\"gray\"\r\n            left={8}\r\n            onMouseEnter={() => {\r\n              this.setState({\r\n                activePoint: 'start',\r\n              });\r\n            }}\r\n            onMouseLeave={() => {\r\n              this.setState({\r\n                activePoint: 'move',\r\n              });\r\n            }}\r\n          />\r\n        </div>\r\n        {/* 轴上的标记点 */}\r\n        <div>\r\n          {\r\n            marks && marks.length && marks.map(mark => (\r\n              <HoverPoint\r\n                key={mark.title}\r\n                left={this.calculateLeft(mark.date)}\r\n                onMouseEnter={() => {\r\n                  this.setState({\r\n                    activePoint: mark.key,\r\n                  });\r\n                }}\r\n                onMouseLeave={() => {\r\n                  this.setState({\r\n                    activePoint: 'move',\r\n                  });\r\n                }}\r\n              />\r\n            ))\r\n          }\r\n        </div>\r\n        {/* 内容区域 */}\r\n        <div style={{ height: 40 }}>\r\n          {/* 开始时间 */}\r\n          <AlignBox left={0} zIndex={activePoint === 'start' ? 5 : 1}>\r\n            <span\r\n              style={{\r\n                display: 'inline-block',\r\n                marginTop: 8,\r\n                background: 'white',\r\n                color: 'gray',\r\n                border: activePoint === 'start' && '1px solid gray',\r\n                borderRadius: 5,\r\n\r\n              }}\r\n            >\r\n              {`${moment().format('LL')}-开始`}\r\n            </span>\r\n          </AlignBox>\r\n          <div>\r\n            {\r\n              marks && marks.length && marks.map(mark => (\r\n                <AlignBox left={this.calculateLeft(mark.date)}>\r\n                  <span\r\n                    key={mark.title}\r\n                    style={{\r\n                      display: 'inline-block',\r\n                      marginTop: 8,\r\n                      background: 'white',\r\n                      color: 'rgb(54, 179, 126)',\r\n                      border: activePoint === mark.key && '1px solid rgb(54, 179, 126)',\r\n                      zIndex: activePoint === mark.key && 5,\r\n                    }}\r\n                  >\r\n                    {`${mark.date.format('LL')}-${mark.title}`}\r\n                  </span>\r\n                </AlignBox>\r\n              ))\r\n            }\r\n          </div>\r\n          {/* 实时滚动时间 */}\r\n          <div>\r\n            {pointing && (\r\n              <AlignBox left={left} zIndex={6}>\r\n                <span\r\n                  style={{\r\n                    display: 'inline-block',\r\n                    marginTop: 8,\r\n                    // transform: 'translateX(-50%)',\r\n                    background: 'white',\r\n                    color: MOVE_COLOR,\r\n                    border: `1px solid ${MOVE_COLOR}`,\r\n                    borderRadius: 5,\r\n                  }}\r\n                >\r\n                  {moment(currentDate).format('LL')}\r\n                </span>\r\n              </AlignBox>\r\n            )}\r\n          </div>\r\n          <div>\r\n            {this.renderHeightLightDuring()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nLine.propTypes = {\r\n\r\n};\r\n\r\nexport default Line;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Point extends Component {\r\n  static defaultProps = {\r\n    size: 'medium',\r\n  }\r\n\r\n  saveRef = name => (ref) => {\r\n    this[name] = ref;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      color, left, reverse, size, \r\n    } = this.props;\r\n\r\n    return (\r\n      <div\r\n        className=\"Point\"\r\n        ref={this.saveRef('Point')}\r\n        {...this.props}\r\n        style={{\r\n          background: reverse ? color : 'white',\r\n          left: left || 0,\r\n          transform: size === 'small' && 'scale(0.6)',\r\n          ...this.props.style,\r\n        }}\r\n      >\r\n        <div\r\n          className=\"Point-inner\"\r\n          style={{\r\n            background: reverse ? 'white' : color,\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPoint.propTypes = {\r\n  size: PropTypes.oneOf(['small', 'medium']),\r\n};\r\n\r\nexport default Point;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Point from './Point';\r\n\r\nclass HoverPoint extends Component {\r\n  state = {\r\n    pointing: false,\r\n    color: 'rgb(54, 179, 126)',\r\n  }\r\n\r\n  handleMouseEnter = (e) => {\r\n    // e.stopPropagation();\r\n    // e.preventDefault();\r\n    this.setState({\r\n      pointing: true,\r\n    });\r\n    if (this.props.onMouseEnter) {\r\n      this.props.onMouseEnter();\r\n    }\r\n  }\r\n\r\n  handleMouseLeave = (e) => {\r\n    // e.stopPropagation();\r\n    // e.preventDefault();\r\n    this.setState({\r\n      pointing: false,\r\n    });\r\n    if (this.props.onMouseLeave) {\r\n      this.props.onMouseLeave();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { pointing, color } = this.state;\r\n    return (\r\n      <Point \r\n        color={color}       \r\n        {...this.props}\r\n        onMouseEnter={this.handleMouseEnter}\r\n        onMouseLeave={this.handleMouseLeave}        \r\n        reverse={pointing}\r\n        // contentShow={pointing}        \r\n      />      \r\n    );\r\n  }\r\n}\r\n\r\nHoverPoint.propTypes = {\r\n\r\n};\r\n\r\nexport default HoverPoint;\r\n","/*\r\n * @Author: LainCarl \r\n * @Date: 2018-12-26 17:47:28 \r\n * @Last Modified by: LainCarl\r\n * @Last Modified time: 2018-12-26 18:07:44\r\n * @Feature: 保证点的描述渲染位置正确\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { findDOMNode } from 'react-dom';\r\n\r\nclass AlignBox extends Component {\r\n  state = {\r\n    left: 0,\r\n  }\r\n\r\n  static defaultProps = {\r\n    totalWidth: 0,\r\n    zIndex: 0,\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setLeft();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    this.setLeft();\r\n  }\r\n\r\n  setLeft = () => {\r\n    const { left } = this.props;\r\n    const node = findDOMNode(this);\r\n    const contentWidth = node.offsetWidth + 2;\r\n    // 父元素的宽度\r\n    const totalWidth = node.parentNode.offsetWidth;\r\n    let finalLeft = left; \r\n    finalLeft -= contentWidth / 2;// 向左移动，居中    \r\n    finalLeft = Math.min(finalLeft, totalWidth - contentWidth);// 保证向右不会超出父元素   \r\n    finalLeft = Math.max(0, finalLeft);// 保证向左不会超出父元素\r\n    finalLeft = Math.round(finalLeft);   \r\n\r\n    // 防止渲染死循环\r\n    if (Math.abs(this.state.left - finalLeft) > 1) {\r\n      this.setState({\r\n        left: finalLeft,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { left } = this.state;\r\n    const { zIndex } = this.props;\r\n    return (\r\n      <div style={{\r\n        display: 'inline-block', position: 'absolute', left, zIndex, \r\n      }}\r\n      >\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nAlignBox.propTypes = {\r\n\r\n};\r\n\r\nexport default AlignBox;\r\n"],"sourceRoot":""}